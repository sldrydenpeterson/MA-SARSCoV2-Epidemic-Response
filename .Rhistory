#   filter(Name=="Allston" | Name=="Brighton" | Name== "West Roxbury") %>%
#   mutate(Town=Name,
#          Town=ifelse(Town=="Brighton" | Town== "Allston", "Allston Brighton", "West Roxbury")) %>%
#   group_by(Town)%>%
#   dplyr::summarise(geometry=st_union(geometry))
#
# cityofboston.3 <- as_Spatial(cityofboston.sf, IDs=cityofboston.sf$Town)
# cityofboston.4 <- spTransform(cityofboston.3 , CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
# Allston.WestRox<-tidy(cityofboston.4, region = c("Town"))
#
#
#
# #remove boston from town map file to permit replacing with neighborhoods
# towns.noboston<- towns.df %>% filter(id != "BOSTON")
#
# #taking zipcode maps and extracting boston neighbohoords
# towns.onlyboston<- t5 %>% filter(
#   id == "East Boston" |
#     id == "Charlestown" |
#     id == "Back Bay Downtown" |
#     id == "South Boston" |
#     id == "South End" |
#     id == "Fenway" |
#     id == "Roxbury" |
#     id == "Dorchester Uphams" |
#     id == "Dorchester Codman" |
#     id == "Mattapan" |
#     id == "Jamaica Plain" |
#     id == "Roslindale" |
#     id == "Hyde Park" |
#     id == "West Roxbury" #|  #issues with zipcode geography around BC/brookline makes these inaccurate.
#   # id == "Allston Brighton" |
# )
#
# #merging to create full boston data set (West Rox still missing chunk bordering brookline)
# townsgeo_onlybostonneigh <-full_join(towns.onlyboston, Allston.WestRox %>% filter(id !="West Roxbury")) %>%#adding in allston/brighton, West Rox still partially inaccurate
#   #filter( piece== "1")%>%
#   mutate(Town=str_to_title(id, locale = "en")) #remove non-populated islands and Fenway chunk in the 'neck'
# write_csv(townsgeo_onlybostonneigh, "townsgeo_onlybostonneigh.csv")
#
# #MA towns with boston neigh  ## does not include Allston Brighton
# townsgeo_withbostonneigh <-full_join(towns.noboston,towns.onlyboston) %>%
#   mutate(Town=str_to_title(id, locale = "en"))
# write_csv(townsgeo_withbostonneigh, "townsgeo_withbostonneigh.csv")
#
# #MA towns with boston as whole city
# townsgeo<-towns.df %>%
#   mutate(Town=str_to_title(id, locale = "en"))
# write_csv(townsgeo %>% filter(order<250000), "townsgeo1.csv")  #splitting to two files to keep <25mb
# write_csv(townsgeo %>% filter(order>=250000), "townsgeo2.csv") #splitting to two files to keep <25mb
#
# #past code
# # zips_WSG84 <- spTransform(zips, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
# # zips_tidy <- tidy(zips_WSG84, region = c('POSTCODE'))
# # write_csv(zips_tidy, "zips_tidy.csv")
## vaccination reports from MDPH
# vaccine by zipcode by age group table
vaccine.anydose.age<-(rbind(
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2,
col_types = c("text", "numeric", "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip","skip","skip"),
col_names = c("zipcode", "age12to15", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
reportdate=as.Date("2021-05-20")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-13-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-05-13")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-06-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-05-06")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-29-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-04-29")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-22-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-04-22")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-15-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-04-15")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-08-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-04-08")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-01-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-04-01")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-25-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-03-25")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-17-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-03-17")) %>% relocate(reportdate),
read_excel(sheet = "Age - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-11-2021.xlsx",
skip = 2,
col_types = c("text",  "numeric","numeric",  "numeric","numeric", "numeric","numeric",  "numeric","numeric",
"numeric","numeric", "skip", "skip","skip","skip","skip", "skip", "skip","skip","skip","skip",
"skip", "skip","skip","skip","skip","skip", "skip","skip","skip","skip"),
col_names = c("zipcode", "age16to19", "age20to29", "age30-39", "age40to49", "age50to59",
"age60to64", "age65-69", "age70to74", "age75to79", "age80plus"))%>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
age12to15 = NA,
reportdate=as.Date("2021-03-11")) %>% relocate(reportdate)) %>%
rowwise %>% filter(!is.na(zipcode)) %>%
ungroup()
)
save(vaccine.anydose.age, file="vaccine.anydose.age.Rdata")
save(vaccine.anydose.age, file="vaccine.anydose.age.Rdata")
save(vaccine.anydose.age, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.anydose.age.Rdata")
# vaccine by zipcode by sex/gender table (including other)
vaccine.sex<-(rbind(
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-05-20")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-13-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-05-13")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-06-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-05-06")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-29-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-04-29")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-22-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-04-22")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-15-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-04-15")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-08-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-04-08")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-01-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-04-01")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-25-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male), na.rm = TRUE),
reportdate=as.Date("2021-03-25")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-17-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-03-17")) %>% relocate(reportdate),
read_excel(sheet = "Sex - zip code",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-11-2021.xlsx",
skip = 2, col_types = c("text", "skip", "skip", "skip", "numeric",
"numeric", "numeric", "skip", "skip", "skip"),
col_names = c("zipcode", "fullvax.female", "fullvax.male", "fullvax.other")) %>%
rowwise(zipcode) %>%
mutate(zipcode= if_else(nchar(zipcode)<5, paste0(0,zipcode), zipcode),
fullvax.total=sum(c(fullvax.female, fullvax.male, fullvax.other), na.rm = TRUE),
reportdate=as.Date("2021-03-11")) %>% relocate(reportdate)
) %>%
rowwise %>% filter(!is.na(zipcode)) %>%
ungroup())
save(vaccine.sex, file="vaccine.sex.Rdata")
save(vaccine.sex, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.sex.Rdata")
save(vaccine.town, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.town.Rdata")
vaccine.town<-rbind(
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-20")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-13-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-13")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-06-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-06")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-29-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-29")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-22-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-22")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-15-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-15")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-08-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-08")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-01-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-01")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-25-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-25")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-17-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-17")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-11-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-11")) %>% relocate(reportdate))
save(vaccine.town, file="vaccine.town.Rdata")
save(vaccine.town, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.town.Rdata")
save(vaccine.race, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.race.Rdata")
vaccine.town<-rbind(
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-20")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-13-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-13")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-06-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-06")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-29-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-29")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-22-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-22")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-15-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-15")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-08-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-08")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-01-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-01")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-25-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-25")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-17-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-17")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-11-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-11")) %>% relocate(reportdate))
save(vaccine.town, file="vaccine.town.Rdata")
save(vaccine.town, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.town.Rdata")
vaccine.race<-read_excel(sheet = "Race and ethnicity - muni.",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "skip", "skip", "skip",
"skip", "skip","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Race_eth", "pop")) %>%
filter(Race_eth=="Total" | Race_eth=="Black" | Race_eth=="Hispanic") %>%
pivot_wider(names_from = Race_eth, values_from = pop) %>%
mutate(blacklatinx.pct=(Black + Hispanic)/ Total,
Town=str_replace(Town, " \\s*\\([^\\)]+\\)", ""))  %>%
dplyr::select(Town, blacklatinx.pct)#remove parenthetic phrase)
save(vaccine.race, file="vaccine.race.Rdata")
save(vaccine.race, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.race.Rdata")
vaccine.town<-rbind(
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-20")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-13-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-13")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-06-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-05-06")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-29-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-29")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-22-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-22")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-15-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-15")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-08-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-08")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-4-01-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-04-01")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-25-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-25")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-17-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-17")) %>% relocate(reportdate),
read_excel(sheet = "Age - municipality",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-3-11-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "numeric", "numeric", "skip", "skip", "numeric","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Age_group", "pop", "proportion_pop", "onedose", "fullvax")) %>%
mutate(reportdate=as.Date("2021-03-11")) %>% relocate(reportdate))
save(vaccine.town, file="vaccine.town.Rdata")
save(vaccine.town, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.town.Rdata")
vaccine.race<-read_excel(sheet = "Race and ethnicity - muni.",
"~/Dropbox (Partners HealthCare)/GitHub/Ma-Covid-Testing/weekly-covid-19-municipality-vaccination-report-5-20-2021.xlsx",
skip = 2, col_types = c("skip", "text", "text", "numeric", "skip", "skip", "skip",
"skip", "skip","skip", "skip","skip", "skip","skip"),
col_names = c("Town","Race_eth", "pop")) %>%
filter(Race_eth=="Total" | Race_eth=="Black" | Race_eth=="Hispanic") %>%
pivot_wider(names_from = Race_eth, values_from = pop) %>%
mutate(blacklatinx.pct=(Black + Hispanic)/ Total,
Town=str_replace(Town, " \\s*\\([^\\)]+\\)", ""))  %>%
dplyr::select(Town, blacklatinx.pct)#remove parenthetic phrase)
save(vaccine.race, file="vaccine.race.Rdata")
save(vaccine.race, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/vaccine.race.Rdata")
## read in data from weekly printed report
CasesRace<-read_excel("~/Dropbox (Partners HealthCare)/R files/covid/MGB census.xlsx", sheet="CasesRace") %>%
mutate(date=lubridate::ymd(date))
VaxRace<-read_excel("~/Dropbox (Partners HealthCare)/R files/covid/MGB census.xlsx", sheet="MDPHvaccine") %>%
mutate(date=lubridate::ymd(date)) %>%
dplyr::select(date, AI.AN:Unknown) %>%
filter(!is.na(AI.AN))
save(CasesRace, file="CasesRace.Rdata")
save(VaxRace, file="VaxRace.Rdata")
save(CasesRace, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/CasesRace.Rdata")
save(VaxRace, file="~/Dropbox (Partners HealthCare)/GitHub/MA-SARSCoV2-Testing-Alignment/VaxRace.Rdata")
